function createCloud(t,a,n,i,e,s){var o=n/2,h=i/2,d=2*Math.PI,{r,g:c,b:l,a:u}=s,s=document.createElement("canvas"),m=s.getContext("2d");s.width=n,s.height=i;for(let t=0;t<e;t++){var g=getRandom(0,.75),x=getRandom(0,d),v=Math.cos(x)*o*g,x=Math.sin(x)*h*g,g=o+v,w=h+x,v=Math.min(o-Math.abs(v),h-Math.abs(x))*getRandom(.5,1),x=m.createRadialGradient(g,w,0,g,w,v);x.addColorStop(0,`rgba(${r},${c},${l},${u})`),x.addColorStop(1,`rgba(${r},${c},${l},0)`),m.fillStyle=x,m.beginPath(),m.arc(g,w,v,0,d,!0),m.fill()}return{x:t,y:a,w:n,h:i,canvas:s}}function drawCloud(t,a){a.drawImage(t.canvas,t.x-t.w/2,t.y-t.h/2)}export default class Clouds{#clouds=[];#wind=0;#sky="rgba(0,0,0,0)";#running=!1;#lastUpdate;#idleThreshold=250;#context;#animationId;constructor(t){if(!(t instanceof HTMLCanvasElement))throw"Invalid HTML canvas.";this.#context=t.getContext("2d")}pause(){this.#running&&(this.#running=!1,cancelAnimationFrame(this.#animationId))}run(){this.#running||(this.#running=!0,this.#animationFrame())}setWindDirection(t){this.#wind=t}setSkyColor(t){this.#sky=t}add(t,a,n,i,e,s,o){t=createCloud(t,a,n,i,e,s);t.speed=o,this.#clouds.push(t)}draw(){var t=this.#context.canvas.width,a=this.#context.canvas.height;this.#context.clearRect(0,0,t,a),this.#context.fillStyle=this.#sky,this.#context.fillRect(0,0,t,a),this.#clouds.forEach(t=>drawCloud(t,this.#context))}update(h){this.#clouds.forEach(t=>{var a=this.#context,n=this.#wind,i=t.speed*h/1e3,e=Math.cos(n)*i,n=Math.sin(n)*i,i=t.w,s=t.h,o=a.canvas.width,a=a.canvas.height;t.x+=e,0<e&&t.x-i>o?t.x=0-i:e<0&&t.x+i<0&&(t.x=o+i),t.y+=n,0<n&&t.y-s>a?t.y=0-s:n<0&&t.y+s<0&&(t.y=a+s)})}#animate(t){var a=t-this.#lastUpdate;void 0!==this.#lastUpdate&&a<this.#idleThreshold&&(this.update(a),this.draw()),this.#lastUpdate=t,this.#animationFrame()}#animationFrame(){this.#animationId=requestAnimationFrame(t=>this.#animate(t))}}function getRandom(t,a){return Math.random()*(a-t)+t}export{createCloud,drawCloud};